---
// Navbar.astro
---
<nav class="fixed top-0 w-full z-[100] bg-white/70 backdrop-blur-xl border-b border-zinc-200/50 py-5 transition-all duration-300" id="main-nav">
  <div class="container mx-auto px-6 flex justify-between items-center">
    
    <div class="flex items-center gap-3">
      <img src="/images/logo-roger.png" alt="Roger Pizzas Logo" class="h-12 w-auto object-contain" />
      <div class="flex flex-col">
        <span class="text-xl font-black tracking-tighter text-zinc-900 italic leading-none uppercase">
          ROGER<span class="text-roger-green">PIZZAS</span>
        </span>
        <span class="text-[8px] font-bold tracking-[0.4em] text-zinc-400 uppercase ml-1">Est. 2024</span>
      </div>
    </div>

    <div class="flex items-center gap-8">
      <div class="hidden md:flex gap-6">
        <a href="#hero" class="text-[10px] font-bold uppercase tracking-widest text-zinc-500 hover:text-roger-green transition-colors">Inicio</a>
        
        <a href="#especiales" class="especiales-link text-[10px] font-black uppercase tracking-widest text-zinc-900 hover:text-roger-green transition-all flex items-center gap-1">
          Especialidades <span class="animate-pulse">ðŸ”¥</span>
        </a>

        <a href="#builder" class="text-[10px] font-bold uppercase tracking-widest text-zinc-500 hover:text-roger-green transition-colors">Configurador</a>
      </div>

      <button 
        id="open-cart" 
        class="group relative bg-zinc-900 text-white px-7 py-3 rounded-2xl font-bold text-[11px] uppercase tracking-widest hover:bg-roger-green transition-all duration-300 flex items-center gap-3 shadow-lg shadow-zinc-900/10 active:scale-95"
      >
        <span class="relative">
          Ver Pedido
          <span class="absolute -bottom-1 left-0 w-0 h-[1px] bg-white transition-all group-hover:w-full"></span>
        </span>
        
        <div id="cart-counter-container" class="hidden">
            <span id="cart-counter" class="bg-roger-green text-white w-6 h-6 rounded-lg flex items-center justify-center text-[10px] font-black border border-white/20 shadow-sm">
                0
            </span>
        </div>

        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="opacity-70 group-hover:rotate-12 transition-transform">
            <circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
      </button>
    </div>

  </div>
</nav>

<script is:inline>
    // Aseguramos el comportamiento de scroll suave para los enlaces del navbar
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        });
    });

    window.cart = window.cart || [];

    window.updateCartUI = function() {
        const counter = document.getElementById('cart-counter');
        const container = document.getElementById('cart-counter-container');
        const totalItems = window.cart.reduce((acc, item) => acc + item.cantidad, 0);

        if (counter && container) {
            counter.innerText = totalItems.toString();
            if (totalItems > 0) {
                container.classList.remove('hidden');
            } else {
                container.classList.add('hidden');
            }
        }
    };

    document.getElementById('open-cart')?.addEventListener('click', () => {
        const modal = document.getElementById('order-modal');
        if (modal) {
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
    });

    // Efecto de scroll para el navbar
    const nav = document.getElementById('main-nav');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 20) {
            nav?.classList.add('py-3', 'shadow-sm', 'bg-white/95');
            nav?.classList.remove('py-5', 'bg-white/70');
        } else {
            nav?.classList.add('py-5', 'bg-white/70');
            nav?.classList.remove('py-3', 'shadow-sm', 'bg-white/95');
        }
    });

    window.updateCartUI();
</script>

<style>
    #main-nav {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .text-roger-green { color: #16a34a; }
    .bg-roger-green { background-color: #16a34a; }

    .especiales-link {
        position: relative;
    }
    
    .especiales-link::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 0;
        width: 0;
        height: 2px;
        background-color: #16a34a;
        transition: width 0.3s ease;
    }

    .especiales-link:hover::after {
        width: 100%;
    }
</style>